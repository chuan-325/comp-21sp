# hw 04 - 01

## 练习 4.2.2

考虑上下文无关文法

$$
S\rightarrow +\ S\ S\ |*\ S\ S\ |\ a
$$

以及串 $+* aaa$.

### Sol.

#### (1) 给出这个串的一个最左推导

$$
S
\Rightarrow +SS
\Rightarrow +*SSS
\Rightarrow +*aSS
\Rightarrow +*aaS
\Rightarrow +*aaa
$$

#### (2) 给出这个串的一个最右推导

$$
S
\Rightarrow +SS
\Rightarrow +Sa
\Rightarrow +*SSa
\Rightarrow +*Saa
\Rightarrow +*aaa
$$

#### (3) 给出这个串的一颗语法分析树

![422-tree](hw_04_01.assets/422tree.png){ : style="height:200px"}

#### (4) 这个文法是否是二义性的? 证明你的回答 (提示: 可以对串的长度做归纳)

该文法无二义性.

##### 证明:

从文法本身可知, 除空串外串长不可能为 $2x$, 其中 $x$ 为自然数, 而空串的语法树自然是唯一的.

归纳基础:

- 串长为 1 时, $S\rightarrow a$ 推导唯一, 显然语法树唯一
- 串长为 3 时, 可能是 $+aa$ 或 $*aa$ , 这两种情形语法树均唯一

归纳假设:

- 假设每个长度不大于 $k$ 的串都有唯一的语法树, $k>0$ .

考虑该文法对应的语言中长度恰为 $k+2$ 的串 $v$ .

因为 $k+2>1$, 所以串 $v$ 的开头不可能是 $a$ , 即开头一定是运算符号.

假设该符号为 $+$ :

- 若第二个符号也是运算符号, 则串 $v$ 可由 $+Sa$ 推导得到, 其中 $S$ 为 $k$ 长度的串, 它有唯一的语法树, 因此 $v=+Sa$ 有唯一的语法树;
- 若第二个符号是 $a$ , 则串 $v$ 可由 $+aS$ 推导得到, 其中 $S$ 为 $k$ 长度的串, 它有唯一的语法树, 因此 $v=+aS$ 有唯一的语法树;

当该符号为 $*$ 时同理.

因此归纳假设成立, 该文法中所有串的语法树都是唯一的, 也就是说该文法无二义性.

#### (5) 这个文法生成的语言是什么?

这个文法生成的是关于操作数 $a$ 的含 $*$ 和 $+$ 运算的前缀表达式.

## 练习 4.2.3 (2)

为下面语言设计文法: 所有由 0 和 1 组成的回文 (palindrome) 的集合, 也就是从前面和从后面读结果都相同的串的集合.

### Sol.

设计文法: $S\rightarrow 0S0\ |\ 1S1\ |\ 0\ |\ 1\ |\ \epsilon$ .

## 练习 4.3.2 (5)

下面的布尔表达式 (Ex. 4.2.3(7)) 对应的文法:

```
bexpr   -> bexpr or bterm
        |  bterm
bterm   -> bterm and bfactor
        |  bfactor
bfactor -> not bfactor
        |  (bexpr)
        |  true
        |  false
```

1. 对该文法提取左公因子;
2. 提取左公因子的变换能使这个文法适用于自顶向下的语法分析技术吗? 原因?
3. 将提取了左公因子的文法继续消除左递归;
4. 此时得到的文法适用于自顶向下的语法分析吗?

### Sol.

(1) 该文法无公共左因子.

(2) 不能: 该文法存在左递归.

(3) 消除左递归:

```
  bexpr -> bterm X
      X -> or bterm X
        |  ε
  bterm -> bfactor Y
      Y -> and bfactor
        |  ε
bfactor -> not bfactor
        |  (bexpr)
        |  true
        |  false
```

(4) 此时的文法适用于自顶向下的语法分析.
