# hw 02 - 01

## 练习 2.2.1

考虑下面的上下文无关文法:

$$
S\rightarrow S S +\ |\ S S *\ |\ a
$$

### Sol.

#### (1) 试说明如何使用文法生成串 $aa+a*$.

$$
S\rightarrow SS*
\rightarrow SS+a*
\rightarrow aa+a*
$$

#### (2) 试为这个串构造一棵语法分析树.

语法分析树:

![pic-1.](hw_02_01.assets/pic-1.png){: style="height:200px"}

#### (3) 该文法生成的语言是什么?

该文法生成的语言是: 所有关于 'a' 的含有 '+', '\*' 运算的后缀表达式组成的集合.

#### (4) 该文法具有二义性吗? 为什么?

该文法没有二义性.

> 下面是一个提示:
> 可以考虑对运算符数量运用数学归纳法,
> 说明每一步有唯一的最左推导.

简单表述一下:

1. 证明符号数量为 1, 3 时有最左推导;
2. 假设长为 k 的串的每一步存在唯一的最左推导;
   1. 证明长为 k+1 的串不存在;
   2. 证明长为 k+2 的串也存在唯一的最左推导;
3. 归纳假设成立.

> 下面是原始回答, 可能存在一些不够完备的地方.

原因如下:

"后缀表达式" 本身可以在计算机中借助栈的 push 和 pop 操作来运算, 由此想到对于该语言可以构造一个下推自动机, 并且题目里提到这是一个上下文无关语法, 下推自动机在能力上与上下文无关文法等价, 这说明存在一个 PDA , 它可以接受这个文法所描述的语言, 如图所示:

![pic-2.](hw_02_01.assets/pic-2.png){: style="height:200px"}

从图中可以看出, 对于该语言中的每一个串, PDA 的行为都是唯一的, 因此这个语言是无二义性的.

## 练习 2.2.5

(1) 证明: 用下面文法生成的所有二进制串的值都能被 3 整除 (提示: 对语法分析树的结点数目使用数学归纳法)

$$
num→11\ |\ 1001\ |\ num\ 0\ |\ num\ num
$$

(2) 上面的文法是否能够生成所有能被 3 整除的二进制串?

### Sol.

(1) 证明:

> 下面这个思路实际上是一种递归. 也是对语法树的结点做归纳.

1. $num$ 为语法分析树的叶子结点:
   - $num\rightarrow 11$, $(11)_2=(3)_{10}$, $num$ 能被 3 整除;
   - $num\rightarrow 1001$, $(1001)_2=(9)_{10}$, $num$ 能被 3 整除;
2. $num$ 为语法分析树的非叶结点:
   - 语法分析树根结点的两个子结点是 $num$ 和 $0$, 也就是 $num_0\rightarrow num_1\ 0$ 的形式, 这种情形下, $num_0=2\times num_1$, 因此只要 $num_1$ 被 3 整除, $num_0$ 就能被 3 整除;
   - 语法分析树根结点的两个子结点是 $num$ 和 $num$, 也就是 $num_0\rightarrow num_1\ num_2$ 的形式, 这种情形下, $num_0=num_1\times 2^{len(num_2)}+num_2$, 因此只要 $num_1$ 和 $num_2$ 被 3 整除, $num_0$ 就能被 3 整除;

结合以上两点, 由归纳法可知, 该文法生成的所有二进制串都能被 3 整除. (原本写错了, 这个应该不是数学归纳法)

> 更直接的想法: 对推导的长度做数学归纳法

(2) 不能, 比如该文法无法生成形如 $0^n, n>0$ 的串, 也无法生成形如 10101 的串 ($(10101)_2=(21)_{10}$).

## 练习 2.3.1

构建一个语法制导翻译方案, 该方案把算术表达式从中缀表示方式翻译为运算符在运算分量之前的前缀表示方式. 例如, $-xy$ 是表达式 $x-y$ 的前缀表示. 给出输入 $9-5+2$ 和 $9-5*2$ 的注释分析树.

### Sol.

将中缀表达式翻译为前缀表达式的 ...

> 按照答案写上来先...

**语法制导翻译方案**:

```
E -> {print('+')} E1 + T
   | {print('-')} E1 + T
   | T
T -> {print('*')} T1 + F
   | {print('/')} T1 + F
   | F
F -> digit {print(digit)}
   | (E)
// 你当然可以把 digit 写开, 我只是偷懒了==
```

*语法制导定义* (这玩意儿不!是!语!法!制!导!翻!译!方!案! 原本写错了!!!):

| 产生式                          | 语义规则                                        |
| ------------------------------- | ----------------------------------------------- |
| $expr\rightarrow expr_1+term$   | $expr.t='+' \lVert\ expr_1.t\ \lVert\ term.t$   |
| $expr\rightarrow expr_1-term$   | $expr.t='-' \lVert\ expr_1.t\ \lVert\ term.t$   |
| $expr\rightarrow term$          | $expr.t=term.t$                                 |
| $term\rightarrow term_1*factor$ | $term.t='*' \lVert\ term_1.t\ \lVert\ factor.t$ |
| $term\rightarrow term_1/factor$ | $term.t='/' \lVert\ term_1.t\ \lVert\ factor.t$ |
| $term\rightarrow factor$        | $term.t=factor.t$                               |
| $factor\rightarrow digit$       | $factor.t=digit.t$                              |
| $factor\rightarrow (expr)$      | $factor.t=expr.t$                               |
| $digit\rightarrow 0$            | $digit.t=\ '0'$                                 |
| $digit\rightarrow 1$            | $digit.t=\ '1'$                                 |
| $digit\rightarrow 2$            | $digit.t=\ '2'$                                 |
| $digit\rightarrow 3$            | $digit.t=\ '3'$                                 |
| $digit\rightarrow 4$            | $digit.t=\ '4'$                                 |
| $digit\rightarrow 5$            | $digit.t=\ '5'$                                 |
| $digit\rightarrow 6$            | $digit.t=\ '6'$                                 |
| $digit\rightarrow 7$            | $digit.t=\ '7'$                                 |
| $digit\rightarrow 8$            | $digit.t=\ '8'$                                 |
| $digit\rightarrow 9$            | $digit.t=\ '9'$                                 |

写出 **注释分析树**:

$9-5+2$:

![pic-3.](hw_02_01.assets/pic-3.png){: style="height:280px"}

$9-5*2$:

![pic-4.](hw_02_01.assets/pic-4.png){: style="height:250px"}
